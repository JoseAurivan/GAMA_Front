@page "/painel/cidadao/listartelefone"
@inject HttpClient http
@using Core.Entities
@using System.Text.Json;

<h3>Telefones Uteis</h3>

<table class="table table-dark">
    <thead>
        <tr>
            <th scope="col">Secretaria</th>
            <th scope="col">Telefone</th>
        </tr>
    </thead>
   <tbody>
       <tr>
           @if(secretarias.Count ==0)
            {
                <FrontEnd_GAMA.Components.Loading>

                </FrontEnd_GAMA.Components.Loading>
            }
        </tr>
   </tbody>

</table>

<a href="/painel/cidadao"> Voltar </a>

@code {
    public List<Secretaria> secretarias = new List<Secretaria>();

    protected override async Task OnInitializedAsync()
    {
        var response = await http.GetFromJsonAsync<IEnumerable<Secretaria>>("secretaria");
        if(response is not null)
            secretarias = response.ToList();

        await base.OnInitializedAsync();
    }
}
